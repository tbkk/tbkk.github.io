---
layout:     post
title:      脱离大数据看HBASE-架构
subtitle:   HBase
date:       2019-01-19
author:     TBKK
header-img: img/post-bg-hacker.jpg
catalog: true
tags:
    - JAVA
---


# HBase整体架构

![image](http://www.qinxinfeng.com/img/hbase/6.jpg)
这张架构图，在各大网站均可看到，下面我们分析一下核心组件，虚线一下其实属于HDFS范围了，属于底层支撑了。这种关系举个例子，相当于Mysql之于文件系统,我们只需要看虚线以上的就行了。


### HBase核心组件

#### Client：
* 使用HBase RPC机制与HMaster和HRegionServer进行通信
* Client与HMaster进行通信进行管理类操作 
* Client与HRegionServer进行数据读写类操作 

#### Zookeeper：
* Zookeeper Quorum存储-ROOT-表地址、HMaster地址 
* HRegionServer把自己以Ephedral方式注册到Zookeeper中，HMaster随时感知各个HRegionServer的健康状况 
* Zookeeper避免HMaster单点问题 

#### HMaster：主要负责Table和Region的管理工作
* 管理用户对表的增删改查操作 
* 管理HRegionServer的负载均衡，调整Region分布 
* Region Split后，负责新Region的分布 
* 在HRegionServer停机后，负责失效HRegionServer上Region迁移 

#### HRegionServer：负责HRegion管理工作

#### HStore：HBase存储的核心。由MemStore和StoreFile组成。 

#### HLog：每次用户操作写入Memstore的同时，也会写一份数据到HLog文件

#### HFile：数据文件都存储在Hadoop HDFS文件系统上


 

